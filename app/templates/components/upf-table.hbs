<div class='row upf-contextual-nav'>
  <div class='pull-right'>
  <div class='dropdown'>
    <a id='upf-datatable__display-columns'  data-toggle='dropdown'
       aria-expanded='false' class='upf-link--reset text-color-contrast'>
      Display Columns
    </a>

    <ul class='dropdown-menu dropdown-menu-right upf-dropdown'
        aria-labelledby='upf-datatable__display-columns'>
      {{#each _columns as |column|}}
        <li>
          {{#upf-checkbox value=column.visible hasLabel=true}}
            {{column.title}}
          {{/upf-checkbox}}
        </li>
      {{/each}}
    </ul>
  </div>
  </div>
</div>

<table class='upf-datatable'>
  <thead>
    {{#upf-table/row isHeaderRow=true}}
      {{#if hasSelection}}
        <th width='70px' class='upf-datatable__column upf-datatable__column--unsortable'>
          {{upf-checkbox value=allRowsSelected}}
        </th>
      {{/if}}

      {{#each _columns as |column|}}
        {{#unless (eq column.visible false)}}
          <th class='upf-datatable__column'>{{column.title}}</th>
        {{/unless}}
      {{/each}}
    {{/upf-table/row}}
  </thead>

  <tbody>
    {{#each collection as |item index|}}
      {{#upf-table/row ref=item}}
        {{#if hasSelection}}
          <td class='upf-datatable__column'>{{upf-checkbox value=item.selected}}</td>
        {{/if}}

        {{#each _columns as |column|}}
          {{#unless (eq column.visible false)}}
            {{#if column.component}}
              <td valign='middle' class='upf-datatable__column'>
                {{component column.component item=item column=column}}
              </td>
            {{else}}
              <td class='upf-datatable__column'>{{get item column.property}}</td>
            {{/if}}
          {{/unless}}
        {{/each}}
      {{/upf-table/row}}
    {{/each}}
  </tbody>
</table>
